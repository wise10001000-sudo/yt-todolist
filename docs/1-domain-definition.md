# 도메인 정의서

## 1. 프로젝트 개요

### 1.1 프로젝트 명

**yt-todolist** - 사용자 인증 기반 할일 관리 애플리케이션

### 1.2 프로젝트 목적

개인별 할일 목록을 효율적으로 관리하고, 국경일 등 공통 일정과 함께 통합 관리할 수 있는 웹 기반 애플리케이션을 제공한다.

### 1.3 핵심 가치

- 사용자별 독립적인 할일 관리
- 일정 기반 할일 추적 (시작일/종료일)
- 삭제된 항목의 복구 기능
- 공통 일정(국경일)과 개인 일정의 통합 관리

## 2. 핵심 도메인 개념 및 엔티티

### 2.1 User (사용자)

사용자는 시스템에 가입하여 개인 할일 목록을 관리하는 주체이다.

**주요 속성:**

- 사용자 ID (고유 식별자)
- 이메일
- 비밀번호 (암호화)
- 사용자명
- 가입일시
- 최종 로그인 일시

**핵심 책임:**

- 시스템 접근 권한 보유
- 개인 할일 목록 소유 및 관리

### 2.2 Todo (할일)

사용자가 관리하는 개별 할일 항목이다.

**주요 속성:**

- 할일 ID (고유 식별자)
- 소유자 (User 참조)
- 제목
- 내용 (선택)
- 시작일시
- 종료일시 (만료일)
- 생성일시
- 수정일시
- 상태 (활성/휴지통)
- 삭제일시 (휴지통 이동 시 자동 기록)

**핵심 책임:**

- 일정 정보 보유
- 상태 변경 (활성 ↔ 휴지통)
- 삭제일시 관리
- 수정 이력 관리

### 2.3 PublicHoliday (공휴일/국경일)

모든 사용자에게 공통으로 표시되는 국경일 및 공휴일 정보이다.

**주요 속성:**

- 공휴일 ID (고유 식별자)
- 제목
- 날짜
- 유형 (국경일/기념일)
- 반복 여부

**핵심 책임:**

- 공통 일정 정보 제공
- 삭제 불가 속성 보유

**참고:**

- 휴지통(Trash)은 별도 엔티티가 아니라 Todo의 상태(활성/휴지통)로 관리됩니다.
- 휴지통 상태의 할일은 원복(복원) 또는 영구 삭제가 가능합니다.

## 3. 비즈니스 규칙

### 3.1 인증 및 권한 규칙

- **BR-001**: 회원가입하지 않은 사용자는 할일 관리 기능에 접근할 수 없다.
- **BR-002**: 로그인한 사용자는 자신이 생성한 할일만 조회, 수정, 삭제할 수 있다.
- **BR-003**: 다른 사용자의 할일 목록은 조회할 수 없다.

### 3.2 할일 관리 규칙

- **BR-004**: 할일은 제목과 종료일시(만료일)를 필수로 가져야 한다.
- **BR-005**: 시작일시는 종료일시보다 이전이어야 한다.
- **BR-006**: 할일 수정 시 제목, 내용, 시작일시, 종료일시를 변경할 수 있다.
- **BR-007**: 개인 할일만 수정 및 삭제가 가능하다.

### 3.3 삭제 및 복구 규칙

- **BR-008**: 할일 삭제 시 즉시 삭제되지 않고 휴지통으로 이동한다.
- **BR-009**: 휴지통의 할일은 원복(복원)할 수 있다.
- **BR-010**: 휴지통의 할일은 영구 삭제할 수 있으며, 영구 삭제된 데이터는 복구할 수 없다.
- **BR-011**: 공휴일(국경일)은 삭제할 수 없다.

### 3.4 공휴일 관리 규칙

- **BR-012**: 공휴일은 모든 사용자에게 동일하게 표시된다.
- **BR-013**: 공휴일은 사용자가 생성, 수정, 삭제할 수 없다.
- **BR-014**: 공휴일은 사용자의 개인 할일 목록과 함께 조회된다.

## 4. 주요 기능 및 유스케이스

### 4.1 사용자 인증

**UC-001: 회원가입**

- Actor: 비회원 사용자
- 목적: 시스템에 가입하여 할일 관리 기능 사용
- 주요 흐름:
  1. 사용자가 이메일, 비밀번호, 사용자명을 입력한다.
  2. 시스템은 이메일 중복을 확인한다.
  3. 시스템은 사용자 계정을 생성한다.

**UC-002: 로그인**

- Actor: 가입된 사용자
- 목적: 시스템에 인증하여 개인 할일 목록에 접근
- 주요 흐름:
  1. 사용자가 이메일과 비밀번호를 입력한다.
  2. 시스템은 인증 정보를 검증한다.
  3. 시스템은 세션을 생성하고 접근 권한을 부여한다.

### 4.2 할일 관리

**UC-003: 할일 목록 조회**

- Actor: 로그인한 사용자
- 목적: 자신의 할일과 공휴일을 함께 조회
- 주요 흐름:
  1. 사용자가 할일 목록 조회를 요청한다.
  2. 시스템은 사용자의 개인 할일(활성 상태)을 조회한다.
  3. 시스템은 공휴일 정보를 조회한다.
  4. 시스템은 통합된 목록을 날짜순으로 정렬하여 표시한다.

**UC-004: 할일 추가**

- Actor: 로그인한 사용자
- 목적: 새로운 할일 항목 생성
- 주요 흐름:
  1. 사용자가 제목, 내용, 시작일시, 종료일시를 입력한다.
  2. 시스템은 입력 데이터를 검증한다. (BR-004, BR-005)
  3. 시스템은 새로운 할일을 생성하고 저장한다.

**UC-005: 할일 수정**

- Actor: 로그인한 사용자
- 목적: 기존 할일의 정보 변경
- 주요 흐름:
  1. 사용자가 수정할 할일을 선택한다.
  2. 사용자가 제목, 내용, 시작일시, 종료일시를 수정한다.
  3. 시스템은 수정 권한을 확인한다. (BR-002, BR-007)
  4. 시스템은 입력 데이터를 검증한다. (BR-005)
  5. 시스템은 변경사항을 저장한다.

**UC-006: 할일 삭제 (휴지통 이동)**

- Actor: 로그인한 사용자
- 목적: 할일을 휴지통으로 이동
- 주요 흐름:
  1. 사용자가 삭제할 할일을 선택한다.
  2. 시스템은 삭제 권한과 할일 유형을 확인한다. (BR-002, BR-007, BR-011)
  3. 시스템은 할일 상태를 '휴지통'으로 변경한다. (BR-008)

### 4.3 휴지통 관리

**UC-007: 휴지통 조회**

- Actor: 로그인한 사용자
- 목적: 삭제된 할일 목록 확인
- 주요 흐름:
  1. 사용자가 휴지통 조회를 요청한다.
  2. 시스템은 사용자의 휴지통 상태 할일을 조회한다.
  3. 시스템은 삭제일시 순으로 정렬하여 표시한다.

**UC-008: 할일 복원**

- Actor: 로그인한 사용자
- 목적: 휴지통의 할일을 활성 상태로 복원
- 주요 흐름:
  1. 사용자가 복원할 할일을 선택한다.
  2. 시스템은 복원 권한을 확인한다. (BR-002)
  3. 시스템은 할일 상태를 '활성'으로 변경한다. (BR-009)

**UC-009: 할일 영구 삭제**

- Actor: 로그인한 사용자
- 목적: 휴지통의 할일을 완전히 삭제
- 주요 흐름:
  1. 사용자가 영구 삭제할 할일을 선택한다.
  2. 시스템은 삭제 권한을 확인한다. (BR-002)
  3. 시스템은 삭제 확인을 요청한다.
  4. 사용자가 확인하면 시스템은 데이터를 영구 삭제한다. (BR-010)

## 5. 도메인 경계

### 5.1 포함되는 기능 (In-Scope)

- 사용자 인증 및 관리 (회원가입, 로그인)
- 개인 할일 CRUD (생성, 조회, 수정, 삭제)
- 휴지통 관리 (조회, 복원, 영구 삭제)
- 공휴일 조회 및 통합 표시
- 일정 기반 할일 관리 (시작일/종료일)

### 5.2 제외되는 기능 (Out-of-Scope)

- 사용자 간 할일 공유 기능
- 할일 알림/푸시 기능
- 할일 우선순위 관리
- 반복 일정 설정
- 할일 카테고리/태그 관리
- 공휴일 데이터 관리 (관리자 기능)
- 할일 검색 기능
- 첨부파일 관리

### 5.3 외부 시스템 연동

- 공휴일 데이터는 외부 API 또는 사전 정의된 데이터로 관리
- 현재 버전에서는 타 시스템과의 연동은 고려하지 않음

## 6. 도메인 용어집

| 용어                         | 정의                                                                                                         |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------ |
| 할일 (Todo)                  | 사용자가 관리하는 개별 작업 항목                                                                             |
| 개인 할일                    | 사용자가 직접 생성하고 관리하는 할일                                                                         |
| 공휴일 (PublicHoliday)       | 모든 사용자에게 공통으로 표시되는 국경일 및 기념일. 할일(Todo)과는 별개의 엔티티이며 조회 시에만 함께 표시됨 |
| 휴지통 (Trash)               | 삭제된 할일을 임시 보관하는 논리적 상태. Todo 엔티티의 상태 속성으로 구현됨                                  |
| 활성 상태                    | 사용자의 할일 목록에 표시되는 정상 상태                                                                      |
| 휴지통 상태                  | 삭제되어 휴지통으로 이동된 상태                                                                              |
| 원복/복원 (Restore)          | 휴지통의 할일을 활성 상태로 되돌리는 행위                                                                    |
| 영구 삭제 (Permanent Delete) | 휴지통의 할일을 완전히 삭제하여 복구 불가능하게 만드는 행위                                                  |
| 만료일                       | 할일의 종료 예정 일시                                                                                        |

## 7. 도메인 모델 관계

```
User (사용자)
 │
 ├── 1:N ──> Todo (개인 할일)
 │            │
 │            ├── 상태: 활성 / 휴지통
 │            └── 삭제일시 (휴지통 상태일 때)
 │
 └── N:M ──> PublicHoliday (공휴일) - 조회만 가능
```

**주요 관계:**

- 한 명의 사용자는 여러 개의 할일을 가질 수 있다.
- 할일은 반드시 한 명의 소유자(사용자)를 가져야 한다.
- 공휴일은 모든 사용자가 조회할 수 있으나 소유권은 없다.
- 휴지통은 할일의 상태 속성으로 구현되며 별도 엔티티가 아니다.
- 할일이 휴지통 상태로 변경되면 삭제일시가 자동으로 기록된다.

## 8. 제약사항 및 가정

### 8.1 기술적 제약사항

- 웹 기반 애플리케이션으로 구현
- 사용자 인증은 세션 또는 토큰 기반
- 데이터는 관계형 데이터베이스에 저장
- 토큰(JWT) 기반 인증 방식 적용
- 토큰은 access_token, refresh_tokend을 함께 사용하도록 할것

### 8.2 비즈니스 가정

- 공휴일 데이터는 시스템 관리자가 사전에 등록
- 사용자는 하나의 계정만 사용
- 휴지통의 할일은 별도 보관 기간 없이 사용자가 직접 관리

---

## 9. 변경 이력

| 버전 | 변경일     | 변경자                 | 변경 내용                 | 승인자 |
| ---- | ---------- | ---------------------- | ------------------------- | ------ |
| 1.1  | 2025-11-25 | 개발팀                 | 우선순위 1 개선 사항 반영 | -      |
| 1.0  | 2025-11-25 | Business Domain Expert | 초안 작성 , 토큰형식 추가 | -      |

### v1.1 상세 변경 내역

**수정:**

- 섹션 2.2 (Todo 엔티티): '삭제일시' 속성 추가 및 핵심 책임에 '삭제일시 관리' 추가
- 섹션 2.3 (PublicHoliday): Trash 엔티티 관련 참고 사항 추가
- 섹션 6 (용어집): '공통 할일' 용어를 '공휴일'로 명확화 및 정의 보완, '휴지통' 정의 명확화
- 섹션 7 (도메인 모델 관계): 삭제일시 속성 관계 추가, 휴지통 설명 보완

**삭제:**

- 섹션 2.4 (Trash 엔티티): 별도 엔티티에서 Todo의 상태 속성으로 통합

**개선 효과:**

- Trash 엔티티 정의 모순 해소 (구조적 명확성 확보)
- Todo 엔티티 속성 완전성 확보 (UC-007 구현 가능)
- 용어 일관성 개선 (공휴일/할일 구분 명확화)

---

**문서 버전:** 1.1
**최초 작성일:** 2025-11-25
**최종 수정일:** 2025-11-25
**작성자:** Business Domain Expert
**수정자:** 개발팀
